{"ast":null,"code":"import _asyncToGenerator from \"/Users/marinemichelot/Desktop/Aston/P1/gitcant/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/order.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction OrderDetailsComponent_li_13_ul_1_li_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const meal_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", meal_r9.label, \" \");\n  }\n}\n\nfunction OrderDetailsComponent_li_13_ul_1_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, OrderDetailsComponent_li_13_ul_1_li_3_div_3_Template, 3, 1, \"div\", 0);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    const orderPart_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.menu.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", item_r7.menu.meals);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", orderPart_r3.quantity, \" x \", i0.ɵɵpipeBind2(6, 5, item_r7.menu.priceDF, \"1.2-2\"), \" unit\\u00E9 \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Total de \", i0.ɵɵpipeBind2(9, 8, orderPart_r3.quantity * item_r7.menu.priceDF, \"1.2-2\"), \" \");\n  }\n}\n\nfunction OrderDetailsComponent_li_13_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"Les Menus\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, OrderDetailsComponent_li_13_ul_1_li_3_Template, 10, 11, \"li\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.order.quantity);\n  }\n}\n\nfunction OrderDetailsComponent_li_13_ul_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"A la Carte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const orderPart_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(orderPart_r3.meal.label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", orderPart_r3.quantity, \" x \", i0.ɵɵpipeBind2(8, 4, orderPart_r3.meal.priceDF, \"1.2-2\"), \" unit\\u00E9 \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Total de \", i0.ɵɵpipeBind2(11, 7, orderPart_r3.quantity * orderPart_r3.meal.priceDF, \"1.2-2\"), \" \");\n  }\n}\n\nfunction OrderDetailsComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtemplate(1, OrderDetailsComponent_li_13_ul_1_Template, 4, 1, \"ul\", 2);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtemplate(3, OrderDetailsComponent_li_13_ul_3_Template, 12, 10, \"ul\", 2);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const orderPart_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", orderPart_r3.menu);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", orderPart_r3.meal);\n  }\n}\n\nfunction OrderDetailsComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.onReturnOders();\n    });\n    i0.ɵɵtext(1, \"Mes Commandes ->\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailsComponent_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onReturnCurrentOders();\n    });\n    i0.ɵɵtext(1, \"Ses Commandes ->\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let OrderDetailsComponent = /*#__PURE__*/(() => {\n  class OrderDetailsComponent {\n    //-------------------- CONSTRUCTEUR ----------------------------------------------\n    constructor(router, route, orderService, datePipe) {\n      this.router = router;\n      this.route = route;\n      this.orderService = orderService;\n      this.datePipe = datePipe;\n      this.orderDate = \"Lundi 4 Juin 2021\";\n      this.orderHour = \"5H08\";\n      this.order = [];\n      this.orderId = \"\";\n      this.userId = \"\";\n      this.orderStatus = \"\";\n      this.msgError = \"\";\n      this.isLunch = true;\n    } //-------------------- ON INIT ----------------------------------------------\n\n\n    ngOnInit() {\n      //RECUPERATION DE L'ID DE L'UTILISATEUR PAR URL\n      this.orderId = this.route.snapshot.paramMap.get('orderId');\n      this.userId = this.route.snapshot.paramMap.get('userId');\n      this.getOrderDetails(this.orderId);\n      let userInfos = localStorage.getItem('user');\n      userInfos = JSON.parse(userInfos);\n      this.isLunch = userInfos.isLunchLady;\n    }\n\n    getOrderDetails(orderId) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          _this.order = yield _this.orderService.getOrderInfos(orderId);\n          console.log(_this.order);\n          let date = new Date();\n\n          let todayDate = _this.datePipe.transform(date, 'yyyy-MM-dd');\n\n          if (_this.order.creationDate >= todayDate) {\n            switch (_this.order.status) {\n              case 0:\n                _this.order.status = \"En Attente\";\n                break;\n\n              case 1:\n                _this.order.status = \"Délivrée\";\n                break;\n\n              case 2:\n                _this.order.status = \"Annulée\";\n                break;\n            }\n          } else {\n            switch (_this.order.status) {\n              case 0:\n                _this.order.status = \"Passée\";\n                break;\n\n              case 1:\n                _this.order.status = \"Délivrée\";\n                break;\n\n              case 2:\n                _this.order.status = \"Annulée\";\n                break;\n            }\n          }\n        } catch (error) {\n          if (error['status'] == 401) {\n            _this.msgError = \"Identifiant ou Mot de Passe Incorrect\";\n          } else {\n            _this.msgError = 'Problème rencontré : ' + error['status'] + ' ' + error.error['exceptionMessage']; //Formation du message d'erreur\n          }\n        }\n      })();\n    } //-------------------- RETOURNE VERS LES COMMANDES ----------------------------------------------\n\n\n    onReturnOders() {\n      //REDIRECTION\n      this.router.navigate(['order/' + this.userId]);\n    }\n\n    onReturnCurrentOders() {\n      //REDIRECTION\n      this.router.navigate(['currentOrder/' + this.userId]);\n    }\n\n  }\n\n  OrderDetailsComponent.ɵfac = function OrderDetailsComponent_Factory(t) {\n    return new (t || OrderDetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.DatePipe));\n  };\n\n  OrderDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderDetailsComponent,\n    selectors: [[\"app-order-details\"]],\n    decls: 16,\n    vars: 6,\n    consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"click\"]],\n    template: function OrderDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"div\");\n        i0.ɵɵelementStart(2, \"p\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\");\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵelementStart(9, \"p\");\n        i0.ɵɵtext(10, \"Commande :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\");\n        i0.ɵɵelementStart(12, \"ul\");\n        i0.ɵɵtemplate(13, OrderDetailsComponent_li_13_Template, 6, 2, \"li\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, OrderDetailsComponent_button_14_Template, 2, 0, \"button\", 1);\n        i0.ɵɵtemplate(15, OrderDetailsComponent_button_15_Template, 2, 0, \"button\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Date : \", ctx.order.creationDate, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Command\\u00E9 \\u00E0 : \", ctx.order.creationTime, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"status : \", ctx.order.status, \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.order.quantity);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLunch);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLunch);\n      }\n    },\n    directives: [i3.NgForOf, i3.NgIf],\n    pipes: [i3.DecimalPipe],\n    styles: [\".contain-order-details[_ngcontent-%COMP%]{width:70%;margin-left:auto;margin-right:auto;margin-top:2em;display:flex;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{text-align:center;font-size:2em;color:#175242;margin-bottom:2em}button[_ngcontent-%COMP%]{background-color:#175242;color:orange;width:20%;margin-top:2em;margin-left:auto;margin-right:auto;padding:.5em;border-radius:6px;border:1px solid white;cursor:pointer}.contain-details[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:column;background-color:#86cb92;padding:2em;border-radius:6px}ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1em}li[_ngcontent-%COMP%]{list-style-type:none;min-width:200px;display:flex;flex-direction:column;align-items:center}h3[_ngcontent-%COMP%]{color:#f18f18;font-weight:900;margin-bottom:3px}h4[_ngcontent-%COMP%]{margin-bottom:3px;color:#175242}p[_ngcontent-%COMP%]{margin-bottom:3px}\"]\n  });\n  return OrderDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}