{"ast":null,"code":"import _asyncToGenerator from \"/Users/marinemichelot/Desktop/Aston/P1/gitcant/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/user.service\";\nimport * as i3 from \"./search/search.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/filter.pipe\";\n\nfunction UsersComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 4);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelementStart(10, \"a\", 8);\n    i0.ɵɵtext(11, \"Voir D\\u00E9tails\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.firstname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r1.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/user/\", user_r1.id, \"\");\n  }\n}\n\nexport let UsersComponent = /*#__PURE__*/(() => {\n  class UsersComponent {\n    //-------------------- CONSTRUCTEUR ----------------------------------------------\n    constructor(router, userService) {\n      this.router = router;\n      this.userService = userService;\n      this.users = [];\n      this.msgError = \"\";\n      this.search = '';\n    } //-------------------- ON INIT ----------------------------------------------\n\n\n    ngOnInit() {\n      //Récuperation de la liste des utilisateurs\n      this.getUsers();\n    } //---------------- RECUPERATION DE LA LISTE DES UTILISATEURS ----------------------------------------------\n\n\n    getUsers() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        //Requete asynchrone de récuperation de la liste des utilisateurs\n        try {\n          //Requete vers le service user\n          _this.users = yield _this.userService.getAllUsers();\n        } catch (error) {\n          if (error['status'] == 401) {\n            _this.msgError = \"Identifiant ou Mot de Passe Incorrect\";\n          } else {\n            _this.msgError = 'Problème rencontré : ' + error['status'] + ' ' + error.error['exceptionMessage']; //Formation du message d'erreur\n          }\n        }\n      })();\n    } //-------------------- RETOUR AU MENU ----------------------------------------------\n\n\n    onReturnMenu() {\n      //REDIRECTION\n      this.router.navigate(['lunchHomepage']);\n    } //-------------------- TRACK BY ID ----------------------------------------------\n\n\n    trackByUserId(user) {\n      return user.id;\n    } //-------------------- RECHERCHE SEARCH BAR DANS LA LISTE DES UTILISATEURS -------------------\n\n\n    onSearch(criteria) {\n      this.search = criteria;\n    }\n\n  }\n\n  UsersComponent.ɵfac = function UsersComponent_Factory(t) {\n    return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n\n  UsersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsersComponent,\n    selectors: [[\"app-users\"]],\n    inputs: {\n      search: \"search\"\n    },\n    decls: 26,\n    vars: 5,\n    consts: [[1, \"contain-users\"], [1, \"contain-table-users\"], [1, \"search-bar\"], [3, \"search\"], [1, \"hidden\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"contain-button\"], [3, \"click\"], [3, \"routerLink\"]],\n    template: function UsersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelementStart(1, \"h2\");\n        i0.ɵɵtext(2, \"Utilisateurs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"app-search\", 3);\n        i0.ɵɵlistener(\"search\", function UsersComponent_Template_app_search_search_5_listener($event) {\n          return ctx.onSearch($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"table\");\n        i0.ɵɵelementStart(9, \"thead\");\n        i0.ɵɵelementStart(10, \"td\");\n        i0.ɵɵtext(11, \"Nom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"td\");\n        i0.ɵɵtext(13, \"Pr\\u00E9nom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"td\", 4);\n        i0.ɵɵtext(15, \"Adresse\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"td\", 4);\n        i0.ɵɵtext(17, \"Mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"td\");\n        i0.ɵɵtext(19, \"Action\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"tbody\");\n        i0.ɵɵtemplate(21, UsersComponent_tr_21_Template, 12, 5, \"tr\", 5);\n        i0.ɵɵpipe(22, \"Userfilter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 6);\n        i0.ɵɵelementStart(24, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function UsersComponent_Template_button_click_24_listener() {\n          return ctx.onReturnMenu();\n        });\n        i0.ɵɵtext(25, \"Retour au Menu\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(22, 2, ctx.users, ctx.search))(\"ngForTrackBy\", ctx.trackByUserId);\n      }\n    },\n    directives: [i3.SearchComponent, i4.NgForOf, i1.RouterLinkWithHref],\n    pipes: [i5.UserFilterPipe],\n    styles: [\".contain-users[_ngcontent-%COMP%]{width:80%;margin:3em auto;padding:3em}h2[_ngcontent-%COMP%]{text-align:center;font-size:2em;color:#175242;margin-bottom:2em}table[_ngcontent-%COMP%]{margin:auto;width:100%;text-align:center;background-color:#86cb92;padding:1em;border:1px solid #175242;border-radius:6px}thead[_ngcontent-%COMP%]{height:40px}thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:1.2em;color:#175242;font-weight:bold}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:40px}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;background-color:orange;color:#175242;padding:.5em;border-radius:6px}.contain-button[_ngcontent-%COMP%]{display:flex;justify-content:center;width:70%;margin-top:1.5em;margin-left:auto;margin-right:auto}.contain-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(204,204,204,0);background-color:#175242;color:#fff;padding:6px 12px;cursor:pointer;border-radius:6px}@media screen and (min-width: 300px) and (max-width: 760px){.hidden[_ngcontent-%COMP%]{display:none}.contain-users[_ngcontent-%COMP%]{width:100%;margin-left:none!important;margin-right:none!important;padding:0}table[_ngcontent-%COMP%]{border:none;border-radius:0}.search-bar[_ngcontent-%COMP%]{margin-left:1em}}\"]\n  });\n  return UsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}